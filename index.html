<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Registration Form - 5th District Level Yogasana Sports Championship</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: #f4f6fa;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .form-container {
      background: #fff;
      max-width: 780px;
      margin: 32px auto 24px auto;
      border-radius: 12px;
      box-shadow: 0 4px 18px rgba(96, 113, 148, 0.1), 0 1.5px 3px rgba(0, 0, 0, 0.06);
      padding: 0 0 40px 0;
    }
    .banner-img {
      display: block;
      width: 100%;
      max-width: 520px;
      margin: 24px auto 0 auto;
      border-radius: 9px;
      box-shadow: 0 2px 10px rgba(128, 128, 128, 0.07);
      background: #fff;
    }
    .form-head {
      text-align: center;
      padding: 0 32px;
      margin-top: 24px;
    }
    .title-main {
      color: #1d3a79;
      font-size: 1.55em;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .desc {
      color: #374160;
      font-size: 1.05em;
      margin-bottom: 25px;
      line-height: 1.5;
    }
    .note {
      color: #963512;
      background: #fff3e5;
      font-weight: 600;
      border-left: 3.5px solid #ff9800;
      padding: 10px 16px;
      margin: 0 24px 22px 24px;
      border-radius: 7px;
      font-size: 0.99em;
    }
    hr {
      margin: 30px 0;
      border: none;
      border-top: 1.5px solid #e1e6ec;
    }
    label {
      font-weight: 600;
      display: block;
      margin: 12px 0 5px 0;
      color: #153769;
    }
    input,
    select,
    textarea {
      width: 100%;
      padding: 11px 12px;
      border: 1.5px solid #dde3ee;
      border-radius: 7px;
      font-size: 1em;
      background: #f4f8fc;
      color: #183153;
      margin-bottom: 7px;
      transition: border-color 0.15s;
      box-sizing: border-box;
    }
    input[type='file'] {
      background: transparent;
      border: none;
      margin-bottom: 18px;
      padding: 0;
    }
    input:focus,
    select:focus,
    textarea:focus {
      border-color: #3065d8;
      outline: none;
    }
    .form-section {
      padding: 0 38px;
      margin-bottom: 26px;
    }
    .form-section h2 {
      color: #215da6;
      font-size: 1.14em;
      font-weight: bold;
      margin-bottom: 12px;
      margin-top: 25px;
    }
    .event-check {
      display: inline-block;
      margin-right: 16px;
      margin-bottom: 7px;
      cursor: pointer;
      user-select: none;
    }
    .submit-btn {
      font-weight: bold;
      margin-top: 18px;
      background: #174ea6;
      color: #fff;
      padding: 16px 34px;
      font-size: 1.13em;
      border: none;
      border-radius: 7px;
      cursor: pointer;
      letter-spacing: 0.02em;
      box-shadow: 0 2px 8px rgba(20, 64, 131, 0.11);
      transition: background 0.16s;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .submit-btn:hover {
      background: #0e387a;
    }
    .small {
      font-size: 0.95em;
      color: #636880;
      margin-bottom: 10px;
    }
    ul,
    li {
      font-size: 0.98em;
    }
    .player2-subsection {
      margin-left: 20px;
      border-left: 4px solid #c1d1fb;
      padding-left: 15px;
      margin-top: 12px;
    }
    /* Readonly style for synced inputs */
    input[readonly] {
      background: #e1e6ec;
      color: #4a4a4a;
    }
    @media only screen and (max-width: 600px) {
      .form-container {
        max-width: 98vw;
        padding: 0 4vw;
      }
      .form-head {
        padding: 0 3vw;
      }
      .form-section {
        padding: 0 2vw;
      }
      .banner-img {
        max-width: 98vw;
      }
      .note {
        margin-left: 0;
        margin-right: 0;
      }
      .event-check {
        display: block;
      }
    }
  </style>
</head>
<body>
  <div class="form-container">
    <img src="image.jpg" alt="Championship Banner" class="banner-img" />
    <div class="form-head">
      <div class="title-main">Registration Form for 5th District Level Yogasana Sports Championship, North West Delhi</div>
      <div class="desc">
        <b>Date:</b> August 24, 2025<br />
        <b>Reporting Time:</b> 8:00 AM onwards<br />
        <b>Venue:</b> Sirifort Institute Of Management Studies,<br />
        Plot Number 8, Institutional Area, Sector 25, Rohini, Delhi-110085.<br />
        <b>Landmark:</b> Near ISKCON Rohini.<br />
        <b>Location on Map:</b>
        <a href="https://maps.app.goo.gl/iJ71X8rkMTNf2HD96" target="_blank" style="color:#2f5bc1;">View Map</a><br />
        <b>Nearest Metro:</b> Rithala (Red Line)
      </div>
    </div>
    <div class="note">
      This Championship is for North West District, Delhi Residents only. Other district athletes can join with NOC from their district.
    </div>
    <div class="form-section">
      <ul class="small">
        <li>All Participants get E-Certificate.</li>
        <li>Registration and event fee must be paid by the registrant.</li>
        <li>Mandatory to upload and carry Aadhar card for all participants.</li>
        <li>Arrive before 8:00 AM, no late entry.</li>
        <li>Protest fee: ₹500. Damage to venue is chargeable.</li>
        <li>No drugs or abuse. Under-18 must have a coach/guardian present.</li>
        <li>Follow Yogasana Bharat (Code of Points): 
          <a href="https://drive.google.com/file/d/19E0ipEfofyB6qFdL-GDUmWb7dBXOSk07/view?usp=sharing" target="_blank">SYLLABUS</a>
        </li>
        <li>Events: Registration ₹500, Traditional Yoga ₹100, Artistic Solo ₹100, Artistic/Rhythmic Pair ₹100/player</li>
      </ul>
    </div>
    <form id="yogasana-form" novalidate>
      <div class="form-section">
        <h2>Personal Details</h2>
        <label>Email <span style="color:#d72a1a;">*</span></label>
        <input type="email" name="email" required />
        <label for="district">Select District <span style="color:#d72a1a;">*</span></label>
        <select id="district" name="district" required>
          <option value="" disabled selected>Select</option>
          <option>North West Delhi</option>
          <option>North Delhi</option>
          <option>North East Delhi</option>
          <option>East Delhi</option>
          <option>New Delhi</option>
          <option>Shahdara</option>
          <option>South Delhi</option>
          <option>South East Delhi</option>
          <option>South West Delhi</option>
          <option>West Delhi</option>
          <option>Central Delhi</option>
          <option>Other</option>
        </select>
        <div class="small">If not North West: NOC from your district is required.</div>
        <label>Age Category (as on 1 Jan 2025) <span style="color:#d72a1a;">*</span></label>
        <select name="age_category" required>
          <option value="" disabled selected>Select</option>
          <option>Sub Junior (10+ to 14 years)</option>
          <option>Junior (14+ to 18 Years)</option>
          <option>Senior (18+ to 28 Years)</option>
          <option>Masters - A (28+ to 35 Years)</option>
          <option>Masters - B (35+ to 45 Years)</option>
          <option>Masters - C (45+ to 55 Years)</option>
        </select>
        <label>Player Gender <span style="color:#d72a1a;">*</span></label>
        <select name="gender" required>
          <option value="" disabled selected>Select</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
        <label>Events (Max two) <span style="color:#d72a1a;">*</span></label><br />
        <span class="event-check"><input type="checkbox" name="events" value="Traditional Yogasana" /> Traditional Yogasana</span>
        <span class="event-check"><input type="checkbox" name="events" value="Artistic Single" /> Artistic Single</span>
        <span class="event-check"><input type="checkbox" name="events" value="Rhythmic Pair" /> Rhythmic Pair</span>
        <span class="event-check"><input type="checkbox" name="events" value="Artistic Pair" /> Artistic Pair</span>
        <div class="small">Select maximum TWO events.</div>
      </div>

      <hr />

      <!-- New Yogasana Player Information Section -->
      <div 
        class="form-section yogasana-player-info-section" 
        style="display:none; border: 2px solid #174ea6; padding: 20px; border-radius: 9px;">
        <h2>Yogasana Player Information</h2>
        <label>Description (optional)</label>
        <input name="yogasana_desc" type="text" />
        <label>Player Name <span style="color:#d72a1a;">*</span></label>
        <input name="yogasana_p1_name" type="text" />
        <label>Father's Name <span style="color:#d72a1a;">*</span></label>
        <input name="yogasana_p1_father" type="text" />
        <label>Date of Birth <span style="color:#d72a1a;">*</span></label>
        <input name="yogasana_p1_dob" type="date" />
        <label>Age (as on 1 Jan 2025) <span style="color:#d72a1a;">*</span></label>
        <input name="yogasana_p1_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number <span style="color:#d72a1a;">*</span></label>
        <input name="yogasana_p1_mobile" type="text" />

        <!-- Player 2 info group, initially hidden unless needed -->
        <div class="player2-subsection" style="display:none;">
          <h3>Player 2 Information</h3>
          <label>Player Name</label>
          <input name="yogasana_p2_name" type="text" />
          <label>Father's Name</label>
          <input name="yogasana_p2_father" type="text" />
          <label>Date of Birth</label>
          <input name="yogasana_p2_dob" type="date" />
          <label>Age (as on 1 Jan 2025)</label>
          <input name="yogasana_p2_age" type="number" min="10" max="55" readonly />
          <label>Mobile/WhatsApp Number</label>
          <input name="yogasana_p2_mobile" type="text" />
        </div>
      </div>

      <hr />

      <!-- Traditional Yogasana Player Info -->
      <div class="form-section traditional-yogasana-section">
        <h2>Traditional Yogasana Player Information</h2>
        <label>Description (optional)</label>
        <input name="trad_yoga_desc" type="text" />
        <label>Player Name <span style="color:#d72a1a;">*</span></label>
        <input name="trad_yoga_name" type="text" />
        <label>Father's Name <span style="color:#d72a1a;">*</span></label>
        <input name="trad_yoga_father" type="text" />
        <label>Date of Birth <span style="color:#d72a1a;">*</span></label>
        <input name="trad_yoga_dob" type="date" />
        <label>Age (as on 1 Jan 2025) <span style="color:#d72a1a;">*</span></label>
        <input name="trad_yoga_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number <span style="color:#d72a1a;">*</span></label>
        <input name="trad_yoga_mobile" type="text" />
      </div>

      <hr />

      <!-- Artistic Yogasana Player Info -->
      <div class="form-section artistic-yogasana-section">
        <h2>Artistic Yogasana Player Information</h2>
        <label>Description (optional)</label>
        <input name="artistic_yoga_desc" type="text" />
        <label>Player Name</label>
        <input name="artistic_yoga_name" type="text" />
        <label>Father's Name</label>
        <input name="artistic_yoga_father" type="text" />
        <label>Date of Birth</label>
        <input name="artistic_yoga_dob" type="date" />
        <label>Age (as on 1 Jan 2025)</label>
        <input name="artistic_yoga_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number</label>
        <input name="artistic_yoga_mobile" type="text" />
      </div>

      <hr />

      <!-- Rhythmic Pair Yogasana Info -->
      <div class="form-section rhythmic-pair-section">
        <h2>Rhythmic Pair Yogasana Players Information</h2>
        <label>Description (optional)</label>
        <input name="rp_desc" type="text" />
        <div class="small" style="margin-top: 0; margin-bottom: 7px; font-weight: 600;">Player 1</div>
        <label>Name</label>
        <input name="rp_p1_name" type="text" />
        <label>Father's Name</label>
        <input name="rp_p1_father" type="text" />
        <label>Date of Birth</label>
        <input name="rp_p1_dob" type="date" />
        <label>Age (as on 1 Jan 2025)</label>
        <input name="rp_p1_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number</label>
        <input name="rp_p1_mobile" type="text" />
        <label>Email ID</label>
        <input name="rp_p1_email" type="email" />
        <div class="small" style="margin-top: 19px; margin-bottom: 7px; font-weight: 600;">Player 2</div>
        <label>Name</label>
        <input name="rp_p2_name" type="text" />
        <label>Father's Name</label>
        <input name="rp_p2_father" type="text" />
        <label>Date of Birth</label>
        <input name="rp_p2_dob" type="date" />
        <label>Age (as on 1 Jan 2025)</label>
        <input name="rp_p2_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number</label>
        <input name="rp_p2_mobile" type="text" />
        <label>Email ID</label>
        <input name="rp_p2_email" type="email" />
      </div>

      <hr />

      <!-- Artistic Pair Yogasana Info -->
      <div class="form-section artistic-pair-section">
        <h2>Artistic Pair Players Information</h2>
        <label>Description (optional)</label>
        <input name="ap_desc" type="text" />
        <div class="small" style="margin-top: 0; margin-bottom: 7px; font-weight: 600;">Player 1</div>
        <label>Name</label>
        <input name="ap_p1_name" type="text" />
        <label>Father's Name</label>
        <input name="ap_p1_father" type="text" />
        <label>Date of Birth</label>
        <input name="ap_p1_dob" type="date" />
        <label>Age (as on 1 Jan 2025)</label>
        <input name="ap_p1_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number</label>
        <input name="ap_p1_mobile" type="text" />
        <label>Email ID</label>
        <input name="ap_p1_email" type="email" />
        <div class="small" style="margin-top: 19px; margin-bottom: 7px; font-weight: 600;">Player 2</div>
        <label>Name</label>
        <input name="ap_p2_name" type="text" />
        <label>Father's Name</label>
        <input name="ap_p2_father" type="text" />
        <label>Date of Birth</label>
        <input name="ap_p2_dob" type="date" />
        <label>Age (as on 1 Jan 2025)</label>
        <input name="ap_p2_age" type="number" min="10" max="55" readonly />
        <label>Mobile/WhatsApp Number</label>
        <input name="ap_p2_mobile" type="text" />
        <label>Email ID</label>
        <input name="ap_p2_email" type="email" />
      </div>

      <hr />

      <div class="form-section">
        <h2>Fee & Document Submission</h2>
        <div class="small">
          <b>Account Details (for UPI/Bank transfer):</b> Vansh Kaushik, 1345362679,
          IFSC KKBK0000197, Kotak Mahindra Bank, Rohini Delhi
        </div>
        <label>UPI QR Code for Payment (upload image)</label>
        <input type="file" accept="image/*" />
        <label>Upload Passport Size Photo (collage for group) <span style="color:#d72a1a;">*</span></label>
        <input type="file" name="photo" accept="image/*" required />
        <label>Upload Birth Certificate <span style="color:#d72a1a;">*</span></label>
        <input type="file" name="birth_cert" accept="image/*,application/pdf" required />
        <label>Aadhar Card Front Photo <span style="color:#d72a1a;">*</span></label>
        <input type="file" name="aadhar_front" accept="image/*" required />
        <label>Aadhar Card Back Photo <span style="color:#d72a1a;">*</span></label>
        <input type="file" name="aadhar_back" accept="image/*" required />
        <label>Payment Transaction ID <span style="color:#d72a1a;">*</span></label>
        <input type="text" name="txn_id" required />
        <label>Upload Payment Receipt <span style="color:#d72a1a;">*</span></label>
        <input type="file" name="payment_receipt" accept="image/*,application/pdf" required />
      </div>

      <hr />

      <button type="submit" class="submit-btn">Submit Registration</button>
    </form>
  </div>

  <script>
    // Limit max 2 checkboxes in Events section
    const eventCheckboxes = document.querySelectorAll('input[name="events"]');

    // Helper to calculate age
    function calculateAge(dobStr) {
      if (!dobStr) return '';
      const dob = new Date(dobStr);
      const refDate = new Date('2025-01-01T00:00:00');
      let age = refDate.getFullYear() - dob.getFullYear();
      const m = refDate.getMonth() - dob.getMonth();
      if (m < 0 || (m === 0 && refDate.getDate() < dob.getDate())) {
        age--;
      }
      return age >= 0 ? age : '';
    }

    // Synchronize Rhythmic Pair Player 1 info to Artistic Pair Player 1 inputs (read-only)
    function syncRpP1ToApP1() {
      const rpP1Fields = ['name', 'father', 'dob', 'age', 'mobile', 'email'];
      rpP1Fields.forEach(field => {
        const rpInput = document.querySelector(`input[name="rp_p1_${field}"]`);
        const apInput = document.querySelector(`input[name="ap_p1_${field}"]`);
        if (rpInput && apInput) {
          // Copy values from rp to ap
          apInput.value = rpInput.value;
          // Set Artistic Pair Player 1 inputs to readonly except for age which is always readonly
          if(field !== 'age') apInput.readOnly = true;
        }
      });
    }

    // Enable or disable artistic pair player1 readonly based on sync status
    function updateSyncApP1Readonly(enableReadonly) {
      const apP1Fields = ['name', 'father', 'dob', 'mobile', 'email'];
      apP1Fields.forEach(field => {
        const apInput = document.querySelector(`input[name="ap_p1_${field}"]`);
        if (apInput) apInput.readOnly = enableReadonly;
      });
    }
    // Always age readonly 
    const apP1AgeInput = document.querySelector('input[name="ap_p1_age"]');
    if(apP1AgeInput) apP1AgeInput.readOnly = true;

    // Show/hide player 2 in Yogasana Player Info section
    const yogPlayer2Div = document.querySelector('.yogasana-player-info-section .player2-subsection');

    function handleEventSelection(e) {
      const checked = document.querySelectorAll('input[name="events"]:checked');
      if (checked.length > 2) {
        e.target.checked = false;
        alert('Please select a maximum of two events only.');
        return;
      }
      updateSections();
    }
    eventCheckboxes.forEach((cb) => cb.addEventListener('change', handleEventSelection));

    function updateSections() {
      const selectedEvents = Array.from(document.querySelectorAll('input[name="events"]:checked')).map(cb => cb.value);

      // References to all sections
      const sections = {
        'Traditional Yogasana': document.querySelector('.traditional-yogasana-section'),
        'Artistic Single': document.querySelector('.artistic-yogasana-section'),
        'Rhythmic Pair': document.querySelector('.rhythmic-pair-section'),
        'Artistic Pair': document.querySelector('.artistic-pair-section'),
        'Yogasana Player Info': document.querySelector('.yogasana-player-info-section')
      };

      // Hide all at first
      for (const sec of Object.values(sections)) {
        if (sec) sec.style.display = 'none';
      }

      // Determine logic per your conditions:

      // Helper for multiselection check
      function hasBoth(e1, e2) {
        return selectedEvents.includes(e1) && selectedEvents.includes(e2);
      }

      // Reset Player2 section in new Yogasana Player Info
      if (yogPlayer2Div) yogPlayer2Div.style.display = 'none';

      // Clear Yogasana Player Info fields on hide/show toggle
      function clearInputs(container) {
        if (!container) return;
        container.querySelectorAll('input, select, textarea').forEach(input => {
          if(input.type === 'checkbox' || input.type === 'radio'){
            input.checked = false;
          } else if(input.type === 'file') {
            input.value = null;
          } else {
            input.value = '';
            if(input.name.endsWith('_age')) {
              input.readOnly = true; // Keep age readonly
            }
            if(input.name.startsWith('ap_p1_')) {
              input.readOnly = false;
            }
          }
        });
      }

      // Case 1: Both events selected are Traditional Yogasana + Artistic Single
      if (selectedEvents.length === 2 &&
         hasBoth('Traditional Yogasana', 'Artistic Single')) {
        // Show ONLY new Yogasana Player Info section with Player1 only
        sections['Yogasana Player Info'].style.display = 'block';

        // Player 2 info hidden
        if (yogPlayer2Div) yogPlayer2Div.style.display = 'none';

        // Hide old Traditional and Artistic Single sections
        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Rhythmic Pair']) clearInputs(sections['Rhythmic Pair']);
        if (sections['Artistic Pair']) clearInputs(sections['Artistic Pair']);

        // Other individual sections hidden
        return;
      }

      // Case 2: Rhythmic Pair + Traditional Yogasana
      if (selectedEvents.length === 2 &&
          hasBoth('Rhythmic Pair', 'Traditional Yogasana') ) {
        sections['Yogasana Player Info'].style.display = 'block';
        if (yogPlayer2Div) yogPlayer2Div.style.display = 'block'; // Player 2 fillable

        // Hide old Traditional and Rhythmic sections and Artistic Single, Artistic Pair
        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Rhythmic Pair']) clearInputs(sections['Rhythmic Pair']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Artistic Pair']) clearInputs(sections['Artistic Pair']);
        return;
      }

      // Case 3: Artistic Pair + Traditional Yogasana
      if (selectedEvents.length === 2 &&
          hasBoth('Artistic Pair', 'Traditional Yogasana') ) {
        sections['Yogasana Player Info'].style.display = 'block';
        if (yogPlayer2Div) yogPlayer2Div.style.display = 'block';

        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Artistic Pair']) clearInputs(sections['Artistic Pair']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Rhythmic Pair']) clearInputs(sections['Rhythmic Pair']);
        return;
      }

      // Case 4: Rhythmic Pair + Artistic Single
      if (selectedEvents.length === 2 &&
          hasBoth('Rhythmic Pair', 'Artistic Single')) {
        sections['Yogasana Player Info'].style.display = 'block';
        if (yogPlayer2Div) yogPlayer2Div.style.display = 'block';

        if (sections['Rhythmic Pair']) clearInputs(sections['Rhythmic Pair']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Artistic Pair']) clearInputs(sections['Artistic Pair']);
        return;
      }

      // Case 5: Artistic Pair + Artistic Single
      if (selectedEvents.length === 2 &&
          hasBoth('Artistic Pair', 'Artistic Single')) {
        sections['Yogasana Player Info'].style.display = 'block';
        if (yogPlayer2Div) yogPlayer2Div.style.display = 'block';

        if (sections['Artistic Pair']) clearInputs(sections['Artistic Pair']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Rhythmic Pair']) clearInputs(sections['Rhythmic Pair']);
        return;
      }

      // Case 6: Artistic Pair + Rhythmic Pair
      if (selectedEvents.length === 2 &&
          hasBoth('Artistic Pair', 'Rhythmic Pair')) {
        // Show both Rhythmic Pair and Artistic Pair sections
        if(sections['Rhythmic Pair']) sections['Rhythmic Pair'].style.display = 'block';
        if(sections['Artistic Pair']) sections['Artistic Pair'].style.display = 'block';
        // Sync Player 1 info from Rhythmic Pair to Artistic Pair and make Artistic Pair's Player 1 fields readonly
        syncRpP1ToApP1();
        updateSyncApP1Readonly(true);

        // Hide others:
        if (sections['Traditional Yogasana']) clearInputs(sections['Traditional Yogasana']);
        if (sections['Artistic Single']) clearInputs(sections['Artistic Single']);
        if (sections['Yogasana Player Info']) {
          clearInputs(sections['Yogasana Player Info']);
          sections['Yogasana Player Info'].style.display = 'none';
        }

        return;
      }

      // Default single or other cases (show relevant individual sections)
      selectedEvents.forEach(eventName => {
        const sec = sections[eventName];
        if (sec) sec.style.display = 'block';
      });

      // Hide others if not selected
      for (const [eventName, sec] of Object.entries(sections)) {
        if (eventName !== 'Yogasana Player Info' && !selectedEvents.includes(eventName)) {
          if(sec) clearInputs(sec);
        }
      }

      // Hide new Yogasana Player Info section and player2 by default here
      if(sections['Yogasana Player Info']){
        clearInputs(sections['Yogasana Player Info']);
        sections['Yogasana Player Info'].style.display = 'none';
      }
      if(yogPlayer2Div) yogPlayer2Div.style.display = 'none';

      // Remove readonly from Artistic Pair Player 1 fields
      updateSyncApP1Readonly(false);
    }

    // Attach DOB listeners to calculate age
    function attachDOBListeners(containerSelector) {
      const container = document.querySelector(containerSelector);
      if (!container) return;
      const dobInputs = container.querySelectorAll('input[type="date"]');
      dobInputs.forEach(dobInput => {
        dobInput.addEventListener('change', () => {
          let ageInputName = dobInput.name.replace('_dob', '_age');
          // Special case for Yogasana Player info 1 & 2
          if (dobInput.name.startsWith('yogasana_p1_dob')) ageInputName = 'yogasana_p1_age';
          else if(dobInput.name.startsWith('yogasana_p2_dob')) ageInputName = 'yogasana_p2_age';

          const ageInput = container.querySelector(`input[name="${ageInputName}"]`);
          if (ageInput) {
            ageInput.value = calculateAge(dobInput.value);
          }

          // For Artistic Pair Player 1, if synced with Rhythmic Pair Player 1, update readonly fields
          if (containerSelector === '.rhythmic-pair-section' && dobInput.name === 'rp_p1_dob') {
            syncRpP1ToApP1();
          }
          // For Rhythmic Pair Player 1 DOB: sync to Artistic Pair Player 1 fields (readonly)
          if(containerSelector === '.rhythmic-pair-section' && dobInput.name === 'rp_p1_dob') {
            syncRpP1ToApP1();
          }
        });
      });
    }

    // Attach DOB listeners on page load for all relevant sections
    ['.traditional-yogasana-section', '.artistic-yogasana-section', '.rhythmic-pair-section', '.artistic-pair-section', '.yogasana-player-info-section'].forEach(attachDOBListeners);

    // Attach listener for Yogasana Player Info Player 1 DOB separately (calculate age)
    const yogP1DOB = document.querySelector('input[name="yogasana_p1_dob"]');
    if (yogP1DOB) {
      yogP1DOB.addEventListener('change', () => {
        const ageInput = document.querySelector('input[name="yogasana_p1_age"]');
        if (ageInput) ageInput.value = calculateAge(yogP1DOB.value);
      });
    }
    // Player 2 DOB
    const yogP2DOB = document.querySelector('input[name="yogasana_p2_dob"]');
    if (yogP2DOB) {
      yogP2DOB.addEventListener('change', () => {
        const ageInput = document.querySelector('input[name="yogasana_p2_age"]');
        if (ageInput) ageInput.value = calculateAge(yogP2DOB.value);
      });
    }

    // Initialize display state on load
    updateSections();

    // Validate max two events on form submit
    document.getElementById('yogasana-form').addEventListener('submit', function(e){
      const checkedEvents = document.querySelectorAll('input[name="events"]:checked');
      if(checkedEvents.length === 0){
        alert('Please select at least one event.');
        e.preventDefault();
      } else if(checkedEvents.length > 2){
        alert('Please select maximum two events only.');
        e.preventDefault();
      }
      // Additional validation can go here if needed
    });
  </script>
</body>
</html>
